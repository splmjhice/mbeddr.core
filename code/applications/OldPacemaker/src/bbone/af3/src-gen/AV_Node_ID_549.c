/* generated by AutoFOCUS 3 (2.2.0) on Wed Sep 19 10:51:57 CEST 2012 */
#include "inc-gen/AV_Node_ID_549.h"

GEN_TYPE_boolean inActive_ID_572;

GEN_TYPE_boolean noval_inActive_ID_572;

GEN_TYPE_boolean ventricle_signal_ID_5610;

GEN_TYPE_boolean noval_ventricle_signal_ID_5610;

GEN_TYPE_boolean active_ID_571;

GEN_TYPE_boolean noval_active_ID_571;

static GEN_TYPE_int current_state;

static GEN_TYPE_int t_rest;

static GEN_TYPE_int scratch_paper_t_rest;

static GEN_TYPE_int t_refractory;

static GEN_TYPE_int scratch_paper_t_refractory;

static GEN_TYPE_int t_trav;

static GEN_TYPE_int scratch_paper_t_trav;

static void copy_scratch_paper();

static GEN_TYPE_boolean fire_transition_activate_ID_564();

static GEN_TYPE_boolean fire_transition_activated_ID_565();

static GEN_TYPE_boolean fire_transition_available_ID_566();

static GEN_TYPE_boolean fire_transition_counter_ID_567();

static GEN_TYPE_boolean fire_transition_counter_ID_568();

static GEN_TYPE_boolean fire_transition_traverse_signal_ID_610();

static GEN_TYPE_boolean fire_state_Rest_ID_551();

static GEN_TYPE_boolean fire_state_Refractory_ID_556();

static GEN_TYPE_boolean fire_state_Activated_ID_561();

void clear_inputs_AV_Node_ID_549(){
noval_inActive_ID_572 = true;
noval_ventricle_signal_ID_5610 = true;
}

void clear_outputs_AV_Node_ID_549(){
noval_active_ID_571 = true;
}

void init_AV_Node_ID_549(){
noval_active_ID_571 = false;
active_ID_571 = false;

current_state = 551;
t_rest = 1500;
scratch_paper_t_rest = 1500;
t_refractory = 150;
scratch_paper_t_refractory = 150;
t_trav = 90;
scratch_paper_t_trav = 90;
}

void perform_step_AV_Node_ID_549(){
clear_outputs_AV_Node_ID_549( );
if (current_state == 561) {
fire_state_Activated_ID_561( );
}
else {
if (current_state == 556) {
fire_state_Refractory_ID_556( );
}
else {
if (current_state == 551) {
fire_state_Rest_ID_551( );
}
}
}
copy_scratch_paper( );
}

static void copy_scratch_paper(){
t_rest = scratch_paper_t_rest;
t_refractory = scratch_paper_t_refractory;
t_trav = scratch_paper_t_trav;
}

static GEN_TYPE_boolean fire_transition_activate_ID_564(){
if ((t_rest == 0 || noval_inActive_ID_572 == false && inActive_ID_572 == true) || noval_ventricle_signal_ID_5610 == false && ventricle_signal_ID_5610 == true) {
scratch_paper_t_rest = tBPAV( );
current_state = 561;
return true;
}
else {
return false;
}
}

static GEN_TYPE_boolean fire_transition_activated_ID_565(){
if (t_trav == 0) {
noval_active_ID_571 = false;
active_ID_571 = true;

scratch_paper_t_trav = 90;
current_state = 556;
return true;
}
else {
return false;
}
}

static GEN_TYPE_boolean fire_transition_available_ID_566(){
if (t_refractory == 0) {
scratch_paper_t_refractory = SArefrac( );
current_state = 551;
return true;
}
else {
return false;
}
}

static GEN_TYPE_boolean fire_transition_counter_ID_567(){
if (t_refractory > 0) {
scratch_paper_t_refractory = t_refractory - 1;
current_state = 556;
return true;
}
else {
return false;
}
}

static GEN_TYPE_boolean fire_transition_counter_ID_568(){
if ((t_rest > 0 && ! (noval_inActive_ID_572 == false && inActive_ID_572 == true)) && ! (noval_ventricle_signal_ID_5610 == false && ventricle_signal_ID_5610 == true)) {
scratch_paper_t_rest = t_rest - 1;
current_state = 551;
return true;
}
else {
return false;
}
}

static GEN_TYPE_boolean fire_transition_traverse_signal_ID_610(){
if (t_trav > 0) {
scratch_paper_t_trav = t_trav - 1;
current_state = 561;
return true;
}
else {
return false;
}
}

static GEN_TYPE_boolean fire_state_Rest_ID_551(){
return fire_transition_activate_ID_564( ) || fire_transition_counter_ID_568( );
}

static GEN_TYPE_boolean fire_state_Refractory_ID_556(){
return fire_transition_available_ID_566( ) || fire_transition_counter_ID_567( );
}

static GEN_TYPE_boolean fire_state_Activated_ID_561(){
return fire_transition_activated_ID_565( ) || fire_transition_traverse_signal_ID_610( );
}

